Database Design Document
    <=> we are using Local-First database along with Bring-Your-Own-Storage (BYOS) approach for our application.
    <=> Database:
        => WatermelonDB (Local-First Database) - uses indexedDB / SQLite as local storage
        => PostgreSQL (Cloud Storage Database)
        => redis (In-memory Database for Caching and Real-time Data Handling)

* Cloud Storage Database Design
--------------------------------
1. USER AND DEVICE MANAGEMENT
    * Users:
        => uid: "'Primary key', 'immutable', 'for intenal use'"

        //-- Public Identifiers
        => username: "'Username', Unique"
        => email: "'Email', Unique, can only added/modify after verification"
        => mobile: "'Mobile Number', Unique, can only added/modify after verification"

        => password_hash: "'Password Hash'"

        //-- Profile Information
        => name: "'Full Name'"
        => dp: "'Display Picture URL'"
        => bio: "'Short Bio or Status Message'"
        => dob: "'Date of Birth', timestamp"
        => gender: "'M/F/O', Enum, 'Male/Female/Other'"
        => country: "'Country Code', Enum"

        //-- Security & Status
        => is_verified: "Boolean, if user informations are verified by government ID"
        => last_active_at: "'Last Active Timestamp'"

        => created_at: "'Account Creation Timestamp'"
        => updated_at: "'Last Account Update Timestamp'"

    * UserSettings:
        => uid: "'SettingsId', Unique"
        => user_id: "'Foreign Key to UserId'"
        => language: "'Preferred Language', Enum"
        => timezone: "'User Timezone', Enum"
        => chats: {
            => theme: 'light' | 'dark' | 'system';
            => font_size: 'small' | 'medium' | 'large';
            => media_auto_download: {
                => photos: "Boolean"
                => videos: "Boolean"
                => audio: "Boolean"
                => documents: "Boolean"
            }
        }
        => notifications: {
            => enabled: "Boolean"
            => group_notifications: "Boolean"
            => vibration: "Boolean"
            => sound: "Boolean"
            => popup_notifications: "Boolean"
            => email_notifications: "Boolean"
        }
        => privacy: {
            => blocked_contacts: "List of UserIds"
            => read_receipts: "Boolean, 'if true, send read receipts to contacts'"
            // -- standard values: 'everyone', 'contacts', 'nobody'
            => last_seen: "Enum, 'everyone', 'contacts', 'nobody'"
            => dp: "Enum, 'everyone', 'contacts', 'nobody'"
            => about: "Enum, 'everyone', 'contacts', 'nobody'"
        }
        => backup: {
            => enabled: "Boolean"
            => backup_location: "String, URL or Path"
            => backup_frequency: "Enum, 'daily', 'weekly', 'monthly'"
            => backup_over_wifi_only: "Boolean"
            => last_backup_at: "'Last Backup Timestamp'"
        }
        => account: {
            => two_factor_auth: "Boolean"
            => account_status: "Enum, 'active', 'deactivated', 'deleted'"
        }
        => created_at: "'Settings Creation Timestamp'"
        => updated_at: "'Last Settings Update Timestamp'"

    * Device:
        => uid: "'DeviceId', Unique"
        => user_id: "'Foreign Key to UserId'"

        //-- Device Identifiers
        => device_name: "'Device Name or Model'"
        => platform: "'Platform', Enum, 'iOS', 'Android', 'Web', 'Desktop'"

        //-- Device Specifications
        => os_name: "'Operating System Name'"
        => os_version: "'Operating System Version'"
        => app_version: "'App Version Installed on Device'"
        => user_agent: "'User Agent String'"

        //-- Push Notification Token
        => fcm_token: "'Firebase Cloud Messaging Token for Push Notifications'"
        => last_active_at: "'Last Active Timestamp'"

        => created_at: "'Device Registration Timestamp'"
        => updated_at: "'Last Device Update Timestamp'"

2. CONVERSATION MANAGEMENT
    * Conversation:
        => uid: "'ConversationId', Unique"
        => is_group: "Boolean, true if group conversation"

        //-- Group Conversation Details
        => group_name: "'Group Name', nullable if one-to-one conversation"
        => group_dp: "'Group display picture URL', nullable if one-to-one conversation"
        => description: "'Group Description', nullable if one-to-one conversation"
        => created_by: "'Foreign Key to UserId of the creator' nullable if one-to-one conversation"
        => settings: {
            => allow_invites: "Boolean, if members can invite others"
            => admin_only_messages: "Boolean, if only admins can send messages"
            => admin_only_edit_info: "Boolean, if only admins can change group info"
        }

        => last_message_at: "'Timestamp of the last message sent in the conversation'"

        => created_at: "'Conversation Creation Timestamp'"
        => updated_at: "'Last Conversation Update Timestamp'"

    * ConversationMembers:
        => uid: "'ParticipantId', Unique"
        => conversation_id: "'Foreign Key to ConversationId'"
        => user_id: "'Foreign Key to UserId'"

        //-- Common Fields for One-to-One and Group Conversations
        => mute_until: "'Timestamp until which notifications are muted', default = 0(not muted)"
        => is_archived: "Boolean, if conversation is archived by the user"
        => is_pinned: "Boolean, if conversation is pinned to top by the user"
        => last_read_at: "'Timestamp of last read message in the conversation'"
        => is_deleted: "Boolean, if the user has deleted the conversation"

        //-- Group Conversation Specific Fields
        => joined_at: "'Timestamp when user joined the group conversation'"
        => added_by: "'Foreign Key to UserId who added this participant'"
        => is_admin: "Boolean, 'if the user is an admin in the group conversation'"
        => has_left: "Boolean, 'if the user has left the group conversation'"

        => created_at: "'Participant Record Creation Timestamp'"
        => updated_at: "'Last Participant Record Update Timestamp'"

3. MESSAGE MANAGEMENT
    * Message:
        => uid: "'MessageId', Unique"
        => conversation_id: "'Foreign Key to ConversationId'"
        => sender_id: "'Foreign Key to UserId of the sender'"

        => type: "'Enum, 'text', 'media', 'location', 'poll', 'event'"
        => content: {
            //-- Text Message Content
            => text: "'Text content of the message', nullable for media messages"

            // Media Message Content
            => media_caption: "'Caption for media messages', nullable"

            //-- location Message Content
            => latitude: "Float, latitude of the location"
            => longitude: "Float, longitude of the location"
            => location_name: "'Name or description of the location', nullable"

            //-- poll Message Content
            => poll_question: "'Question of the poll'"
            => poll_options: "Array of strings, options for the poll"
            => poll_multiple_answers: "Boolean, if multiple answers are allowed"
            => poll_expires_at: "'Timestamp when the poll expires', nullable"

            //-- event Message Content
            => event_title: "'Title of the event'"
            => event_description: "'Description of the event', nullable"
            => event_location: "'Location of the event', nullable"
            => event_start_time: "'Timestamp when the event starts'"
            => event_end_time: "'Timestamp when the event ends', nullable"
        }

        //-- Message Metadata ** this might not required
        => status: "'Enum, 'sent', 'delivered', 'read'', default = 'sent'"
        => sent_at: "'Timestamp when message was sent'"
        => delivered_at: "'Timestamp when message was delivered to recipient(s)', nullable"
        => read_at: "'Timestamp when message was read by recipient(s)', nullable"

        //-- Reply & Forwarding
        => reply_to_message_id: "'Foreign Key to MessageId being replied to', nullable"
        => is_forwarded: "Boolean, if the message was forwarded from another conversation"

        //-- Encryption Metadata
        => is_encrypted: "Boolean, if the message content is encrypted"
        => encryption_algorithm: "'String, name of encryption algorithm used', nullable"

        //-- Editing Metadata
        => is_edited: "Boolean, if the message has been edited"

        => created_at: "'Message Creation Timestamp'"
        => updated_at: "'Last Message Update Timestamp'"

    * MessageReactions:
        => uid: "'ReactionId', Unique"
        => message_id: "'Foreign Key to MessageId'"
        => user_id: "'Foreign Key to UserId of the reactor'"
        => reaction: "'String, e.g., emoji or reaction type'"
        => is_removed: "Boolean, 'if the reaction was removed by the user'"
        => created_at: "'Reaction Record Creation Timestamp'"
        => updated_at: "'Last Reaction Record Update Timestamp'"

    * MessageEdits:
        => uid: "'EditId', Unique"
        => message_id: "'Foreign Key to MessageId'"
        => editor_id: "'Foreign Key to UserId who edited the message'"
        => previous_type: "'Enum, 'text', 'media', 'location', 'poll', 'event'"
        => previous_content: "'Previous content of the message before edit'"
        => new_type: "'Enum, 'text', 'media', 'location', 'poll', 'event'"
        => new_content: "'New content of the message after edit'"
        => edited_at: "'Timestamp when the edit was made'"
        => created_at: "'Edit Record Creation Timestamp'"

4. MEDIA STORAGE MANAGEMENT
    * Media:
        => uid: "'MediaId', Unique"

        //-- Parent Entity Reference
        => parent_type: "'Enum, 'message', 'user', 'conversation'"
        => parent_id: "'Foreign Key to the respective parent entity (MessageId, UserId, ConversationId)'"

        //-- Media File Information
        => type: "'Enum, 'photo', 'video', 'audio', 'document'"
        => file_name: "'Original name of the media file'"
        => remote_path: "'Remote File Path in Cloud Storage'"

        //-- Media Metadata
        => mime_type: "'MIME type of the media file'"
        => size: "Integer, size of the media file in bytes"
        => width: "Integer, width of the media in pixels, nullable for non-visual media"
        => height: "Integer, height of the media in pixels, nullable for non-visual media"
        => duration: "Integer, duration in seconds, nullable for non-audio/video media"

        => created_at: "'Media Record Creation Timestamp'"
        => updated_at: "'Last Media Record Update Timestamp'"

5. DELIVERY MANAGEMENT
    * DeliveryQueue:
        => uid: "'QueueId', Unique"
        => recipient_device_id: "'Foreign Key to DeviceId of the recipient device'"
        => delivery_item_type: "Enum, 'message', 'reaction', 'edit', 'read_receipt'"
        => delivery_item_id: "'Foreign Key to the respective item being delivered (MessageId, ReactionId, EditId)'"
        => created_at: "'Timestamp when the item was added to the delivery queue'"

* Local-First Database Design (WatermelonDB)
--------------------------------------------
1. PROFILE AND USER DATA
    * Profile: // this will be save as JSON in WatermelonDB localstorage
        => uid: "'Primary key', 'immutable', 'for internal use'"

        //-- Public Identifiers
        => username: "'Username', Unique"
        => email: "'Email', Unique"
        => mobile: "'Mobile Number', Unique"

        //-- Profile Information
        => name: "'Full Name'"
        => dp: "'Display Picture URL or Base64 String'"
        => bio: "'Short Bio or Status Message'"
        => dob: "'Date of Birth', timestamp"
        => gender: "'M/F/O', Enum, 'Male/Female/Other'"
        => country: "'Country Code', Enum"

        //-- Security & Status
        => is_verified: "Boolean, if user informations are verified by government ID"
        => last_active_at: "'Last Active Timestamp'"

        => pinned_conversation_id: "'Foreign Key to ConversationId of pinned conversation', nullable"

        => Settings: {
            => setting_id: "'SettingsId', Unique"
            => language: "'Preferred Language', Enum"
            => timezone: "'User Timezone', Enum"
            => chats: {
                => theme: 'light' | 'dark' | 'system';
                => font_size: 'small' | 'medium' | 'large';
                => media_auto_download: {
                    => photos: "Boolean"
                    => videos: "Boolean"
                    => audio: "Boolean"
                    => documents: "Boolean"
                }
            }
            => notifications: {
                => enabled: "Boolean"
                => group_notifications: "Boolean"
                => vibration: "Boolean"
                => sound: "Boolean"
                => popup_notifications: "Boolean"
                => email_notifications: "Boolean"
            }
            => privacy: {
                => blocked_contacts: "List of UserIds"
                => read_receipts: "Boolean, 'if true, send read receipts to contacts'"
                // -- standard values: 'everyone', 'contacts', 'nobody'
                => last_seen: "Enum, 'everyone', 'contacts', 'nobody'"
                => dp: "Enum, 'everyone', 'contacts', 'nobody'"
                => about: "Enum, 'everyone', 'contacts', 'nobody'"
            }
            => backup: {
                => enabled: "Boolean"
                => backup_location: "String, URL or Path"
                => backup_frequency: "Enum, 'daily', 'weekly', 'monthly'"
                => backup_over_wifi_only: "Boolean"
                => last_backup_at: "'Last Backup Timestamp'"
            }
            => account: {
                => two_factor_auth: "Boolean"
                => account_status: "Enum, 'active', 'deactivated', 'deleted'"
                => linked_devices: [{
                    => device_id: "'Foreign Key to DeviceId'"
                    => device_name: "'Device Name or Model'"
                    => platform: "'Platform', Enum, 'ios', 'android', 'Web', 'Desktop'"
                    => os_name: "'Operating System Name'"
                    => last_active_at: "'Last Active Timestamp'"
                }]
            }
        }

        => created_at: "'Account Creation Timestamp'"
        => updated_at: "'Last Account Update Timestamp'"
    * Users:
        => uid: "'Primary key', 'immutable', 'for internal use'"

        //-- Public Identifiers
        => username: "'Username', Unique"
        => mobile: "'Mobile Number'"

        //-- Profile Information
        => name: "'Full Name'"
        => bio: "'Short Bio or Status Message'"

        => dp: "'Display Picture URL or Base64 String', if privacy settings allow"
        => email: "'Email', Unique, if privacy settings allow"
        => dob: "'Date of Birth', timestamp, if privacy settings allow"
        => gender: "'M/F/O', Enum, 'Male/Female/Other', if privacy settings allow"
        => country: "'Country Code', Enum, if privacy settings allow"

        //-- Security & Status
        => is_verified: "Boolean, if user informations are verified by government ID"
        => last_active_at: "'Last Active Timestamp', if privacy settings allow"

        => is_contact: "Boolean, if the user is in the local user's contact list"
        => local_name: "'Custom name for the contact', nullable"

2. CONVERSATION & MESSAGE DATA
    * Conversation:
        => uid: "'ConversationId', Unique"
        => is_group: "Boolean, true if group conversation"

        //-- Group Conversation Details
        => group_name: "'Group Name', nullable if one-to-one conversation"
        => group_dp: "'Group display picture URL', nullable if one-to-one conversation"
        => description: "'Group Description', nullable if one-to-one conversation"
        => created_by: "'UserId of the creator', nullable if one-to-one conversation"
        => settings: {
            => allow_invites: "Boolean, if members can invite others"
            => admin_only_messages: "Boolean, if only admins can send messages"
            => admin_only_edit_info: "Boolean, if only admins can change group info"
        }

        => last_message_at: "'Timestamp of the last message sent in the conversation'"

        => mute_until: "'Timestamp until which notifications are muted', default = 0(not muted)"
        => is_archived: "Boolean, if conversation is archived by the user"
        => is_deleted: "Boolean, if the user has deleted the conversation"
    * ConservationMembers:
        => uid: "'ParticipantId', Unique"
        => conversation_id: "'Foreign Key to ConversationId'"
        => user_id: "'Foreign Key to UserId'"

        //-- Group Conversation Specific Fields
        => is_admin: "Boolean, 'if the user is an admin in the group conversation'"
        => joined_at: "'Timestamp when user joined the group conversation'"
        => has_left: "Boolean, 'if the user has left the group conversation'"

        => created_at: "'Participant Record Creation Timestamp'"
        => updated_at: "'Last Participant Record Update Timestamp'"

3. MESSAGE DATA
    * Message:
        => uid: "'MessageId', Unique"
        => conversation_id: "'Foreign Key to ConversationId'"
        => sender_id: "'Foreign Key to UserId of the sender'"
        => type: "'Enum, 'text', 'media', 'location', 'poll', 'event'"
        => content: {
            //-- Text Message Content
            => text: "'Text content of the message', nullable for media messages"

            //-- Media Message Content
            => media_caption: "'Caption for media messages', nullable"

            //-- location Message Content
            => latitude: "Float, latitude of the location"
            => longitude: "Float, longitude of the location"
            => location_name: "'Name or description of the location', nullable"

            //-- poll Message Content
            => poll_question: "'Question of the poll'"
            => poll_options: "Array of strings, options for the poll"
            => poll_multiple_answers: "Boolean, if multiple answers are allowed"
            => poll_expires_at: "'Timestamp when the poll expires', nullable"

            //-- event Message Content
            => event_title: "'Title of the event'"
            => event_description: "'Description of the event', nullable"
            => event_location: "'Location of the event', nullable"
            => event_start_time: "'Timestamp when the event starts'"
            => event_end_time: "'Timestamp when the event ends', nullable"
        }
        //-- Message Metadata
        => status: "'Enum, 'pending', ' 'sent', 'delivered', 'read'", default = 'pending'"
        => sent_at: "'Timestamp when message was sent',nullable"
        => delivered_at: "'Timestamp when message was delivered to recipient(s)', nullable"
        => read_at: "'Timestamp when message was read by recipient(s)', nullable"
        //-- Reply & Forwarding
        => reply_to_message_id: "'Foreign Key to MessageId being replied to', nullable"
        => is_forwarded: "Boolean, if the message was forwarded from another conversation"
    * MessageReactions:
        => uid: "'ReactionId', Unique"
        => message_id: "'Foreign Key to MessageId'"
        => user_id: "'Foreign Key to UserId of the reactor'"
        => reaction: "'String, e.g., emoji or reaction type'"
        => is_removed: "Boolean, 'if the reaction was removed by the user'"
        => created_at: "'Reaction Record Creation Timestamp'"
        => updated_at: "'Last Reaction Record Update Timestamp'"
    * MessageEdits:
        => uid: "'EditId', Unique"
        => message_id: "'Foreign Key to MessageId'"
        => editor_id: "'Foreign Key to UserId who edited the message'"
        => previous_type: "'Enum, 'text', 'media', 'location', 'poll', 'event'"
        => previous_content: "'Previous content of the message before edit'"
        => new_type: "'Enum, 'text', 'media', 'location', 'poll', 'event'"
        => new_content: "'New content of the message after edit'"
        => edited_at: "'Timestamp when the edit was made'"
        => created_at: "'Edit Record Creation Timestamp'"
        => updated_at: "'Last Edit Record Update Timestamp'"

4. MEDIA MANAGEMENT
    * Media:
        => uid: "'MediaId', Unique"

        //-- Parent Entity Reference
        => parent_type: "'Enum, 'message', 'user', 'conversation'"
        => parent_id: "'Foreign Key to the respective parent entity (MessageId, UserId, ConversationId)'"

        //-- Media File Information
        => type: "'Enum, 'photo', 'video', 'audio', 'document'"
        => file_name: "'Original name of the media file'"
        => local_path: "'Local file path on the device'"
        => thumbnail_path: "'Base64 String or URL of media thumbnail', nullable"
        => remote_path: "'Remote File Path if synced to cloud storage', nullable"

        //-- Media Metadata
        => mime_type: "'MIME type of the media file'"
        => size: "Integer, size of the media file in bytes"
        => width: "Integer, width of the media in pixels, nullable for non-visual media"
        => height: "Integer, height of the media in pixels, nullable for non-visual media"
        => duration: "Integer, duration in seconds, nullable for non-audio/video media"

        => status: "'Enum, 'pending', 'uploaded', 'downloaded', 'failed'"
