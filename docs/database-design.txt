Database Design Document
    <=> we are using Local-First database along with Bring-Your-Own-Storage (BYOS) approach for our application.
    <=> Database:
        => WatermelonDB (Local-First Database) - uses indexedDB / SQLite as local storage
        => PostgreSQL (Cloud Storage Database)
        => redis (In-memory Database for Caching and Real-time Data Handling)


1. USER & DEVICE MANAGEMENT
    * User:
        => id: "'Primary key', 'immutable', 'for intenal use'"

        //-- Public Identifiers
        => username: "'Username', Unique"
        => email: "'Email', Unique, can only added/modify after verification"
        => mobile: "'Mobile Number', Unique, can only added/modify after verification"

        => password_hash: "'Password Hash'"

        //-- Profile Information
        => name: "'Full Name'"
        => profile_picture: "'Profile Picture URL or Base64 String'"
        => bio: "'Short Bio or Status Message'"
        => dob: "'Date of Birth', timestamp"
        => gender: "'M/F/O', Enum, 'Male/Female/Other'"

        // -- Localization Preferences
        => country: "'Country Code', Enum"
        => language: "'Preferred Language', Enum"
        => timezone: "'User Timezone', Enum"

        //-- Security & Status
        => is_verified: "Boolean, if user informations are verified by government ID"
        => last_active_at: "'Last Active Timestamp'"

        => created_at: "'Account Creation Timestamp'"
        => updated_at: "'Last Account Update Timestamp'"

    * UserSettings:
        => id: "'SettingsId', Unique"
        => user_id: "'Foreign Key to UserId'"
        => notifications: {
            => message_tones: "Boolean"
            => vibration: "Boolean"
            => popup_notifications: "Boolean"
            => email_notifications: "Boolean"
            => group_notifications: "Boolean"
        }
        => privacy: {
            => blocked_contacts: "List of UserIds"
            => read_receipts: "Boolean, 'if true, send read receipts to contacts'"
            // -- standard values: 'everyone', 'contacts', 'nobody'
            => last_seen: "Enum, 'everyone', 'contacts', 'nobody'"
            => profile_picture: "Enum, 'everyone', 'contacts', 'nobody'"
        }
        => data_backup: {
            => backup_enabled: "Boolean"
            => backup_location: "String, URL or Path"
            => backup_frequency: "Enum, 'daily', 'weekly', 'monthly', 'never'"
            => backup_over_wifi_only: "Boolean"
            => last_backup_at: "'Last Backup Timestamp'"
            => auto_download_media: {
                => photos: "Boolean"
                => videos: "Boolean"
                => audio: "Boolean"
                => documents: "Boolean"
            }
        }
        => account: {
            => two_factor_auth: "Boolean"
            => language: "Enum, preferred language"
            => timezone: "'User Timezone', Enum"
        }
        => created_at: "'Settings Creation Timestamp'"
        => updated_at: "'Last Settings Update Timestamp'"

    * Device:
        => id: "'DeviceId', Unique"
        => user_id: "'Foreign Key to UserId'"

        //-- Device Identifiers
        => device_name: "'Device Name or Model'"
        => platform: "'Platform', Enum, 'iOS', 'Android', 'Web', 'Desktop'"

        //-- Device Specifications
        => os_name: "'Operating System Name'"
        => os_version: "'Operating System Version'"
        => app_version: "'App Version Installed on Device'"
        => user_agent: "'User Agent String'"

        //-- Push Notification Token
        => fcm_token: "'Firebase Cloud Messaging Token for Push Notifications'"
        => last_active_at: "'Last Active Timestamp'"

        => created_at: "'Device Registration Timestamp'"
        => updated_at: "'Last Device Update Timestamp'"

2. CONVERSATION MANAGEMENT
    * Conversation:
        => id: "'ConversationId', Unique"
        => is_group: "Boolean, true if group conversation"

        //-- Group Conversation Details
        => group_name: "'Group Name', nullable if one-to-one conversation"
        => group_avatar: "'Group Avatar URL or Base64 String', nullable if one-to-one conversation"
        => description: "'Group Description', nullable if one-to-one conversation"
        => created_by: "'Foreign Key to UserId of the creator' nullable if one-to-one conversation"
        => settings: {
            => allow_invites: "Boolean, if members can invite others"
            => admin_only_messages: "Boolean, if only admins can send messages"
            => admin_only_edit_info: "Boolean, if only admins can change group info"
        }

        => last_message_at: "'Timestamp of the last message sent in the conversation'"

        => created_at: "'Conversation Creation Timestamp'"
        => updated_at: "'Last Conversation Update Timestamp'"

    * ConversationMembers:
        => id: "'ParticipantId', Unique"
        => conversation_id: "'Foreign Key to ConversationId'"
        => user_id: "'Foreign Key to UserId'"

        //-- Common Fields for One-to-One and Group Conversations
        => mute_until: "'Timestamp until which notifications are muted', default = 0(not muted)"
        => is_archived: "Boolean, if conversation is archived by the user"
        => is_pinned: "Boolean, if conversation is pinned to top by the user"
        => last_read_at: "'Timestamp of last read message in the conversation'"
        => is_deleted: "Boolean, if the user has deleted the conversation"

        //-- Group Conversation Specific Fields
        => joined_at: "'Timestamp when user joined the group conversation'"
        => added_by: "'Foreign Key to UserId who added this participant'"
        => is_admin: "Boolean, 'if the user is an admin in the group conversation'"
        => has_left: "Boolean, 'if the user has left the group conversation'"

        => created_at: "'Participant Record Creation Timestamp'"
        => updated_at: "'Last Participant Record Update Timestamp'"

3. Message Delivery Engine
    * Message:
        => id: "'MessageId', Unique"
        => conversation_id: "'Foreign Key to ConversationId'"
        => sender_id: "'Foreign Key to UserId of the sender'"

        => type: "'Enum, 'text', 'photo', 'video', 'audio', 'document', 'location', 'poll', 'event'"
        => content: {
            //-- Text Message Content
            => text: "'Text content of the message', nullable for media messages"

            //-- photo Message Content
            => photo_url: "'URL or Path to photo file', nullable for text messages"
            => photo_thumbnail: "'Base64 String or URL of photo thumbnail', nullable"
            => caption: "'Caption for photo messages', nullable"
            => photo_width: "Integer, width of the photo in pixels"
            => photo_height: "Integer, height of the photo in pixels"
            => photo_size: "Integer, size of the photo file in bytes"

            //-- video Message Content
            => video_url: "'URL or Path to video file', nullable for text messages"
            => video_thumbnail: "'Base64 String or URL of video thumbnail', nullable"
            => caption: "'Caption for video messages', nullable"
            => video_width: "Integer, width of the video in pixels"
            => video_height: "Integer, height of the video in pixels"
            => video_duration: "Integer, duration of the video in seconds"
            => video_size: "Integer, size of the video file in bytes"

            //-- audio Message Content
            => audio_url: "'URL or Path to audio file', nullable for text messages"
            => audio_duration: "Integer, duration of the audio in seconds"
            => audio_size: "Integer, size of the audio file in bytes"

            //-- document Message Content
            => document_url: "'URL or Path to document file', nullable for text messages"
            => document_name: "'Original name of the document file'"
            => document_size: "Integer, size of the document file in bytes"
            => document_type: "'MIME type of the document file'"

            //-- location Message Content
            => latitude: "Float, latitude of the location"
            => longitude: "Float, longitude of the location"
            => location_name: "'Name or description of the location', nullable"

            //-- poll Message Content
            => poll_question: "'Question of the poll'"
            => poll_options: "Array of strings, options for the poll"
            => poll_multiple_answers: "Boolean, if multiple answers are allowed"
            => poll_expires_at: "'Timestamp when the poll expires', nullable"

            //-- event Message Content
            => event_title: "'Title of the event'"
            => event_description: "'Description of the event', nullable"
            => event_location: "'Location of the event', nullable"
            => event_start_time: "'Timestamp when the event starts'"
            => event_end_time: "'Timestamp when the event ends', nullable"
        }

        //-- Message Metadata ** this might not required
        => status: "'Enum, 'sent', 'delivered', 'read'', default = 'sent'"
        => sent_at: "'Timestamp when message was sent'"
        => delivered_at: "'Timestamp when message was delivered to recipient(s)', nullable"
        => read_at: "'Timestamp when message was read by recipient(s)', nullable"

        //-- Reply & Forwarding
        => reply_to_message_id: "'Foreign Key to MessageId being replied to', nullable"
        => is_forwarded: "Boolean, if the message was forwarded from another conversation"

        //-- Encryption Metadata
        => is_encrypted: "Boolean, if the message content is encrypted"
        => encryption_algorithm: "'String, name of encryption algorithm used', nullable"

        //-- Editing Metadata
        => is_edited: "Boolean, if the message has been edited"

        => created_at: "'Message Creation Timestamp'"
        => updated_at: "'Last Message Update Timestamp'"

    * MessageReactions:
        => id: "'ReactionId', Unique"
        => message_id: "'Foreign Key to MessageId'"
        => user_id: "'Foreign Key to UserId of the reactor'"
        => reaction: "'String, e.g., emoji or reaction type'"
        => is_removed: "Boolean, 'if the reaction was removed by the user'"
        => created_at: "'Reaction Record Creation Timestamp'"
        => updated_at: "'Last Reaction Record Update Timestamp'"

    * MessageEdits:
        => id: "'EditId', Unique"
        => message_id: "'Foreign Key to MessageId'"
        => editor_id: "'Foreign Key to UserId who edited the message'"
        => previous_content: "'Previous content of the message before edit'"
        => new_content: "'New content of the message after edit'"
        => edited_at: "'Timestamp when the edit was made'"
        => created_at: "'Edit Record Creation Timestamp'"
        => updated_at: "'Last Edit Record Update Timestamp'"

4. Message Delivery System
    * DeliveryQueue:
        => id: "'QueueId', Unique"
        => recipient_device_id: "'Foreign Key to DeviceId of the recipient device'"
        => delivery_item_type: "Enum, 'message', 'reaction', 'edit', 'read_receipt'"
        => delivery_item_id: "'Foreign Key to the respective item being delivered (MessageId, ReactionId, EditId)'"
        => created_at: "'Timestamp when the item was added to the delivery queue'"
